---
title: "軽量な画像最適化パイプラインをHugoで作る"
date: 2025-09-23T10:00:00Z
draft: false
categories: ["tech"]
tags: ["hugo", "画像最適化", "パフォーマンス"]
summary: "Hugo Extendedの画像処理とビルドパイプラインを組み合わせ、依存を最小限に抑えた軽量な画像最適化フローを構築。生成物のサイズ削減とLCP改善のための実践メモ。"
---

Hugo Extendedには画像処理機能が備わっており、外部の最適化ツールに頼らずにサイズ削減やフォーマット変換を行えます。たとえば、`resources.Get`で画像を読み込み、`Fit`や`Resize`で派生画像を生成し、`fingerprint`でキャッシュバスティングされたURLを得る、という流れが最小構成です。加えて`imaging`の品質指定を活用し、サムネイルはWebP、高解像はAVIFなど用途ごとに出し分けます。テンプレート側では`srcset`と`sizes`を丁寧に定義し、CLSを避けるためにwidth/height属性を必ず付与します。記事内画像は`figure`のラッパーを用意してキャプションと一緒に扱うと再利用性が上がります。最終的に、不要な巨大画像の取り込みを避け、LCP要素の画像のみ先にプリロードすることで、初期描画を大きく改善できます。
